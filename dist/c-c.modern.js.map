{"version":3,"file":"c-c.modern.js","sources":["../index.js"],"sourcesContent":["let stylesheet;\nlet cache = {\n    css: ''\n};\n\nexport function c(rules) {\n    const { className, css } = parse({ obj: rules });\n\n    if (typeof document !== 'undefined' && css) {\n        if (!stylesheet) {\n            stylesheet = document.createElement('style');\n\n            document.body.appendChild(stylesheet);\n        }\n\n        // @see: https://stackoverflow.com/a/28930990\n        stylesheet.appendChild(document.createTextNode(css));\n    }\n\n    if (typeof document === 'undefined' && css && cache.css.indexOf(css) === -1) {\n        cache.css = cache.css + css;\n    }\n\n    return className;\n}\n\nexport function styles() {\n    return cache.css;\n}\n\n// @see https://github.com/jxnblk/object-style/blob/v1.0.3/src/index.js\nfunction parse({ obj, children = '', media }) {\n    const rules = [];\n    const classNames = [];\n\n    for (const key in obj) {\n        const value = obj[key];\n\n        if (value === null || value === undefined) continue;\n\n        if (/^@m/.test(key)) {\n            const { className, css } = parse({\n                obj: value,\n                children: children,\n                media: key\n            });\n\n            className && classNames.push(className);\n            css && rules.push(css);\n        }\n        // object not at-rule\n        if (typeof value === 'object' && !/^@/.test(key)) {\n            const { className, css } = parse({\n                obj: value,\n                children: (children + key).replace(' ', ''),\n                media: media\n            });\n\n            className && classNames.push(className);\n            css && rules.push(css);\n        }\n        // declaration\n        if (/string|number/.test(typeof value)) {\n            const id = key + value + children + (media || '');\n\n            // @see https://github.com/cristianbote/goober/blob/v1/src/core/to-hash.js#L10\n            const className =\n                'c' + id.split('').reduce((out, i) => (101 * out + i.charCodeAt(0)) >>> 0, 11);\n            const hasClass = stylesheet && stylesheet.innerHTML.indexOf(className) >= 0;\n\n            classNames.push(className);\n            !hasClass && rules.push(createRule(className, key, value, children, media));\n        }\n    }\n\n    return {\n        className: classNames.join(' '),\n        css: rules.join('')\n    };\n}\n\nfunction createRule(className, key, value, children, media) {\n    const selector = '.' + className + children;\n    const rule =\n        selector + '{' + key.replace(/[A-Z]|^ms/g, '-$&').toLowerCase() + ':' + value + '}';\n\n    if (!media) return rule;\n\n    return media + '{' + rule + '}';\n}\n"],"names":["stylesheet","cache","css","c","rules","className","parse","obj","children","media","classNames","key","value","test","push","replace","split","reduce","out","i","charCodeAt","hasClass","innerHTML","indexOf","createRule","join","document","createElement","body","appendChild","createTextNode","styles","rule","toLowerCase"],"mappings":"AAAA,IAAIA,EACAC,EAAQ,CACRC,IAAK,aAGOC,EAAEC,GACd,MAAMC,UAAEA,EAAFH,IAAaA,GAyBvB,SAASI,GAAMC,IAAEA,EAAFC,SAAOA,EAAW,GAAlBC,MAAsBA,IACjC,MAAML,EAAQ,GACRM,EAAa,GAEnB,IAAK,MAAMC,KAAOJ,EAAK,CACnB,MAAMK,EAAQL,EAAII,GAElB,GAAIC,MAAAA,EAAJ,CAEA,GAAI,MAAMC,KAAKF,GAAM,CACjB,MAAMN,UAAEA,EAAFH,IAAaA,GAAQI,EAAM,CAC7BC,IAAKK,EACLJ,SAAUA,EACVC,MAAOE,IAGXN,GAAaK,EAAWI,KAAKT,GAC7BH,GAAOE,EAAMU,KAAKZ,GAGtB,GAAqB,iBAAVU,IAAuB,KAAKC,KAAKF,GAAM,CAC9C,MAAMN,UAAEA,EAAFH,IAAaA,GAAQI,EAAM,CAC7BC,IAAKK,EACLJ,UAAWA,EAAWG,GAAKI,QAAQ,IAAK,IACxCN,MAAOA,IAGXJ,GAAaK,EAAWI,KAAKT,GAC7BH,GAAOE,EAAMU,KAAKZ,GAGtB,GAAI,gBAAgBW,YAAYD,GAAQ,CACpC,MAGMP,EACF,KAJOM,EAAMC,EAAQJ,GAAYC,GAAS,KAIjCO,MAAM,IAAIC,OAAO,CAACC,EAAKC,IAAO,IAAMD,EAAMC,EAAEC,WAAW,KAAQ,EAAG,IACzEC,EAAWrB,GAAcA,EAAWsB,UAAUC,QAAQlB,IAAc,EAE1EK,EAAWI,KAAKT,IACfgB,GAAYjB,EAAMU,KAAKU,EAAWnB,EAAWM,EAAKC,EAAOJ,EAAUC,MAI5E,MAAO,CACHJ,UAAWK,EAAWe,KAAK,KAC3BvB,IAAKE,EAAMqB,KAAK,KAvEOnB,CAAM,CAAEC,IAAKH,IAiBxC,MAfwB,oBAAbsB,UAA4BxB,IAC9BF,IACDA,EAAa0B,SAASC,cAAc,SAEpCD,SAASE,KAAKC,YAAY7B,IAI9BA,EAAW6B,YAAYH,SAASI,eAAe5B,KAG3B,oBAAbwB,UAA4BxB,IAAmC,IAA5BD,EAAMC,IAAIqB,QAAQrB,KAC5DD,EAAMC,IAAMD,EAAMC,IAAMA,GAGrBG,WAGK0B,IACZ,OAAO9B,EAAMC,IAsDjB,SAASsB,EAAWnB,EAAWM,EAAKC,EAAOJ,EAAUC,GACjD,MACMuB,EADW,IAAM3B,EAAYG,EAEpB,IAAMG,EAAII,QAAQ,aAAc,OAAOkB,cAAgB,IAAMrB,EAAQ,IAEpF,OAAKH,EAEEA,EAAQ,IAAMuB,EAAO,IAFTA"}