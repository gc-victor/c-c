{"version":3,"file":"c-c.modern.js","sources":["../index.js"],"sourcesContent":["let stylesheet;\nlet cache = {\n    css: '',\n    classesNames: {}\n};\n\nconst is = typeof global !== 'undefined' && {}.toString.call(global) === '[object global]';\nconst isNodejs = process.env.TEST ? false : is;\n\nif (!is) {\n    window.process = { env: { TEST: false } };\n}\n\nexport function c(rules) {\n    return parse(rules);\n}\n\nexport function styles() {\n    return cache.css;\n}\n\nfunction insert(rule) {\n    if (!isNodejs) {\n        if (!stylesheet && !document.getElementById('c-c')) {\n            stylesheet = document.createElement('style');\n\n            stylesheet.setAttribute('id', 'c-c');\n            document.body.appendChild(stylesheet);\n        } else if (!stylesheet) {\n            stylesheet = document.getElementById('c-c');\n        }\n\n        // @see: https://stackoverflow.com/a/28930990\n        stylesheet.appendChild(document.createTextNode(rule));\n    }\n\n    if (isNodejs && cache.css.indexOf(rule) === -1) {\n        cache.css = cache.css + rule;\n    }\n}\n\n// @see https://github.com/jxnblk/object-style/blob/v1.0.3/src/index.js\n// @see https://github.com/cxs-css/cxs/blob/master/src/index.js\nfunction parse(obj, children = '', media = '') {\n    return Object.keys(obj)\n        .map((key) => {\n            const value = obj[key];\n\n            if (value === null) return '';\n            if (typeof value === 'object') {\n                const isMedia = /^@m/.test(key);\n\n                return parse(\n                    value,\n                    isMedia ? children : (children + key).replace(' ', ''),\n                    isMedia ? key : media\n                );\n            }\n\n            const id = key + value + children + (media || '');\n\n            if (cache.classesNames[id]) return cache.classesNames[id];\n\n            // @see https://github.com/cristianbote/goober/blob/v1/src/core/to-hash.js#L10\n            const className =\n                'c' + id.split('').reduce((out, i) => (101 * out + i.charCodeAt(0)) >>> 0, 11);\n\n            insert(createRule(className, key, value, children, media));\n\n            cache.classesNames[id] = className;\n\n            return className;\n        })\n        .join(' ');\n}\n\nfunction createRule(className, key, value, children, media) {\n    const selector = '.' + className + children;\n    const rule =\n        selector + '{' + key.replace(/[A-Z]|^ms/g, '-$&').toLowerCase() + ':' + value + '}';\n\n    if (!media) return rule;\n\n    return media + '{' + rule + '}';\n}\n"],"names":["stylesheet","cache","css","classesNames","is","global","toString","call","isNodejs","process","env","TEST","c","rules","parse","styles","obj","children","media","Object","keys","map","key","value","isMedia","test","replace","id","className","split","reduce","out","i","charCodeAt","rule","toLowerCase","createRule","document","getElementById","createElement","setAttribute","body","appendChild","createTextNode","indexOf","join","window"],"mappings":"AAAA,IAAIA,EACAC,EAAQ,CACRC,IAAK,GACLC,aAAc,IAGlB,MAAMC,EAAuB,oBAAXC,QAAuD,oBAA7B,GAAGC,SAASC,KAAKF,QACvDG,GAAWC,QAAQC,IAAIC,MAAeP,WAM5BQ,EAAEC,GACd,OAAOC,EAAMD,YAGDE,IACZ,OAAOd,EAAMC,IAyBjB,SAASY,EAAME,EAAKC,EAAW,GAAIC,EAAQ,IACvC,OAAOC,OAAOC,KAAKJ,GACdK,IAAKC,IACF,MAAMC,EAAQP,EAAIM,GAElB,GAAc,OAAVC,EAAgB,MAAO,GAC3B,GAAqB,iBAAVA,EAAoB,CAC3B,MAAMC,EAAU,MAAMC,KAAKH,GAE3B,OAAOR,EACHS,EACAC,EAAUP,GAAYA,EAAWK,GAAKI,QAAQ,IAAK,IACnDF,EAAUF,EAAMJ,GAIxB,MAAMS,EAAKL,EAAMC,EAAQN,GAAYC,GAAS,IAE9C,GAAIjB,EAAME,aAAawB,GAAK,OAAO1B,EAAME,aAAawB,GAGtD,MAAMC,EACF,IAAMD,EAAGE,MAAM,IAAIC,OAAO,CAACC,EAAKC,IAAO,IAAMD,EAAMC,EAAEC,WAAW,KAAQ,EAAG,IA5C3F,IAAgBC,EAkDJ,OAlDIA,EAuDhB,SAAoBN,EAAWN,EAAKC,EAAON,EAAUC,GACjD,MACMgB,EADW,IAAMN,EAAYX,EAEpB,IAAMK,EAAII,QAAQ,aAAc,OAAOS,cAAgB,IAAMZ,EAAQ,IAEpF,OAAKL,EAEEA,EAAQ,IAAMgB,EAAO,IAFTA,EAdJE,CAAWR,EAAWN,EAAKC,EAAON,EAAUC,GA7CtDV,IACIR,GAAeqC,SAASC,eAAe,OAKhCtC,IACRA,EAAaqC,SAASC,eAAe,SALrCtC,EAAaqC,SAASE,cAAc,SAEpCvC,EAAWwC,aAAa,KAAM,OAC9BH,SAASI,KAAKC,YAAY1C,IAM9BA,EAAW0C,YAAYL,SAASM,eAAeT,KAG/C1B,IAAyC,IAA7BP,EAAMC,IAAI0C,QAAQV,KAC9BjC,EAAMC,IAAMD,EAAMC,IAAMgC,GAgCpBjC,EAAME,aAAawB,GAAMC,EAElBA,IAEViB,KAAK,KAhETzC,IACD0C,OAAOrC,QAAU,CAAEC,IAAK,CAAEC,MAAM"}